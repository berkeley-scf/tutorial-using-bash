<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-04-09">

<title>Using UNIX commands</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-649e5f0678146f359c225094671654aa.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="assets/styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./using-commands.html">Using Commands</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="https://statistics.berkeley.edu" class="sidebar-logo-link">
      <img src="./assets/img/logo.svg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">SCF Bash Shell Tutorial</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/berkeley-scf/tutorial-using-bash" title="" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./file-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">File Management</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./using-commands.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Using Commands</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./shell-programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shell Programming</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./managing-processes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Managing Processes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./regex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regular Expressions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./exercises.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercises</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#basic-utilities-commands" id="toc-basic-utilities-commands" class="nav-link active" data-scroll-target="#basic-utilities-commands">1 Basic utilities / commands</a></li>
  <li><a href="#streams-pipes-and-redirects" id="toc-streams-pipes-and-redirects" class="nav-link" data-scroll-target="#streams-pipes-and-redirects">3 Streams, pipes, and redirects</a>
  <ul class="collapse">
  <li><a href="#streams-stdinstdoutstderr" id="toc-streams-stdinstdoutstderr" class="nav-link" data-scroll-target="#streams-stdinstdoutstderr">3.1 Streams (stdin/stdout/stderr)</a></li>
  <li><a href="#overview-of-redirection" id="toc-overview-of-redirection" class="nav-link" data-scroll-target="#overview-of-redirection">3.2 Overview of redirection</a></li>
  <li><a href="#standard-redirection-pipes" id="toc-standard-redirection-pipes" class="nav-link" data-scroll-target="#standard-redirection-pipes">3.3 Standard redirection (pipes)</a></li>
  <li><a href="#the-tee-command" id="toc-the-tee-command" class="nav-link" data-scroll-target="#the-tee-command">3.4 The <code>tee</code> command</a></li>
  </ul></li>
  <li><a href="#command-substitution-and-the-xargs-command" id="toc-command-substitution-and-the-xargs-command" class="nav-link" data-scroll-target="#command-substitution-and-the-xargs-command">4 Command substitution and the <code>xargs</code> command</a>
  <ul class="collapse">
  <li><a href="#command-substitution" id="toc-command-substitution" class="nav-link" data-scroll-target="#command-substitution">4.1 Command substitution</a></li>
  <li><a href="#the-xargs-command" id="toc-the-xargs-command" class="nav-link" data-scroll-target="#the-xargs-command">4.2 The <code>xargs</code> command</a></li>
  </ul></li>
  <li><a href="#brace-expansion" id="toc-brace-expansion" class="nav-link" data-scroll-target="#brace-expansion">5 Brace expansion</a></li>
  <li><a href="#quoting" id="toc-quoting" class="nav-link" data-scroll-target="#quoting">6 Quoting</a></li>
  <li><a href="#powerful-tools-for-text-manipulation-grep-sed-and-awk" id="toc-powerful-tools-for-text-manipulation-grep-sed-and-awk" class="nav-link" data-scroll-target="#powerful-tools-for-text-manipulation-grep-sed-and-awk">7 Powerful tools for text manipulation: <code>grep</code>, <code>sed</code>, and <code>awk</code></a>
  <ul class="collapse">
  <li><a href="#grep" id="toc-grep" class="nav-link" data-scroll-target="#grep">7.1 <code>grep</code></a></li>
  <li><a href="#sed" id="toc-sed" class="nav-link" data-scroll-target="#sed">7.2 <code>sed</code></a></li>
  <li><a href="#awk" id="toc-awk" class="nav-link" data-scroll-target="#awk">7.3 <code>awk</code></a></li>
  </ul></li>
  <li><a href="#aliases-command-shortcuts-and-.bashrc" id="toc-aliases-command-shortcuts-and-.bashrc" class="nav-link" data-scroll-target="#aliases-command-shortcuts-and-.bashrc">8 Aliases (command shortcuts) and .bashrc</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Using UNIX commands</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 9, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="basic-utilities-commands" class="level2">
<h2 class="anchored" data-anchor-id="basic-utilities-commands">1 Basic utilities / commands</h2>
<p><a href="index#5-introduction-to-commands">Earlier</a> we introduced the basics of entering commands in the shell.</p>
<p>Since files are such an essential aspect of Unix and working from the shell is the primary way to work with Unix, there are a large number of useful commands and tools to view and manipulate files.</p>
<ul>
<li>cat –&nbsp;concatenate files and print to standard output</li>
<li>cp –&nbsp;copy files and directories</li>
<li>cut –_remove sections from each line of files</li>
<li>diff –&nbsp;find differences between two files</li>
<li>grep –&nbsp;print lines matching a pattern</li>
<li>head –&nbsp;output the first part of files</li>
<li>find –&nbsp; search for files in a directory hierarchy</li>
<li>less –&nbsp;opposite of more (and better than more)</li>
<li>more –&nbsp;file perusal filter for crt viewing</li>
<li>mv –&nbsp;move (rename) files</li>
<li>nl –&nbsp;number lines of files</li>
<li>paste –&nbsp;merge lines of files</li>
<li>rm –&nbsp;remove files or directories</li>
<li>rmdir –&nbsp;remove empty directories</li>
<li>sort –&nbsp;sort lines of text files.</li>
<li>split –&nbsp;split a file into pieces</li>
<li>tac –&nbsp;concatenate and print files in reverse</li>
<li>tail –&nbsp;output the last part of files</li>
<li>touch –&nbsp;change file timestamps</li>
<li>tr –&nbsp;translate or delete characters</li>
<li>uniq –&nbsp;remove duplicate lines from a sorted file</li>
<li>wc –&nbsp;print the number of bytes, words, and lines in files</li>
<li>wget and curl –&nbsp;non-interactive internet downloading</li>
</ul>
<p>Recall that a command consists of the command, optionally one or more flags, and optionally one or more arguments. When there is an argument, it is often the name of a file that the command should operate on.</p>
<p>Thus the general syntax for a Unix program/command/utility is:</p>
<pre><code>$ command -options argument1 argument2 ...</code></pre>
<p>For example, :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-i</span> graphics file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>looks for the literal string <code>graphics</code> (argument 1) in <code>file.txt</code> (argument2) with the option <code>-i</code>, which says to ignore the case of the letters. A simpler invocation is:While :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> less file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>which simply pages through a text file (you can navigate up and down with the space bar and the up/down arrows) so you can get a feel for what’s in it. To exit <code>less</code> type <code>q</code>.</p>
<p>Unix programs often take flags (options) that are identified with a minus followed by a letter and then (possibly) followed by the specific option (adding a space before the specific option is fine). Options may also involve two dashes, e.g., <code>R --no-save</code>. A standard two dash option for many commands is <code>--help</code>. For example, try:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">--help</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here are a couple of examples of flags when using the <code>tail</code> command (<code>-n 10</code> and <code>-f</code>):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wget https://raw.githubusercontent.com/berkeley-scf/tutorial-using-bash/master/cpds.csv</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 10 cpds.csv   <span class="co"># last 10 lines of cpds.csv</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-f</span> cpds.csv      <span class="co"># shows end of file, continually refreshing</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The first line downloads the data from GitHub. The two main tools for downloading network-accessible data from the commandline are <code>wget</code> and <code>curl</code>. I tend to use <code>wget</code> as my commandline downloading tool as it is more convenient, but on a Mac, only <code>curl</code> is generally available.</p>
<p>A few more tidbits about <code>grep</code> (we will see more examples of <code>grep</code> in the <a href="regex">section on regular expressions</a>, but it is so useful that it is worth seeing many times):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep ^2001 cpds.csv   <span class="co"># returns lines that start with '2001'</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep 0$ cpds.csv      <span class="co"># returns lines that end with '0'</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep 19.0 cpds.csv    <span class="co"># returns lines with '19' separated from '0' by a single character</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep 19.<span class="pp">*</span>0 cpds.csv   <span class="co"># now separated by any number of characters</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-o</span> 19.0 cpds.csv <span class="co"># returns only the content matching the pattern, not entire lines</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that the first argument to grep is the pattern you are looking for. The syntax is different from that <a href="file-management#3-filename-globbing">used for wildcards</a> in file names. Also, you can use regular expressions in the pattern, but we defer details until <a href="regex">later</a>.</p>
<p>It is sometimes helpful to put the pattern inside double quotes, e.g., if you want spaces in your pattern:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="st">"George .* Bush"</span> cpds.csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>More generally in Unix, enclosing a string in quotes is often useful to indicate that it is a single argument/value.</p>
<p>If you want to explicitly look for one of the special characters used in creating patterns (such as double quote (<code>"</code>), period (<code>.</code>), etc.), you can “escape” them by preceding with a back-slash. For example to look for <code>"Canada"</code>, including the quotes:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="st">"</span><span class="dt">\"</span><span class="st">Canada</span><span class="dt">\"</span><span class="st">"</span> cpds.csv     <span class="co"># look for "Canada" (including quotes)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="st">"19\.0"</span> cpds.csv              <span class="co"># look for 19.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you have a big data file and need to subset it by line (e.g., with <code>grep</code>) or by field (e.g., with <code>cut</code>), then you can do it really fast from the Unix command line, rather than reading it with R, SAS, Python, etc.</p>
<p>Much of the power of these utilities comes in piping between them (see the next section) and <a href="file-management#3-filename-globbing">using wildcards</a> to operate on groups of files. The utilities can also be used in shell scripts to do more complicated things.</p>
<p>We’ll see further examples of how to use these utilities later.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>You’ve already seen some of the above commands. Use the <code>--help</code> syntax to view the abbreviated man pages for some commands you’re not familiar with and consider how you might use these commands.</p>
</div>
</div>
</section>
<section id="streams-pipes-and-redirects" class="level2">
<h2 class="anchored" data-anchor-id="streams-pipes-and-redirects">3 Streams, pipes, and redirects</h2>
<section id="streams-stdinstdoutstderr" class="level3">
<h3 class="anchored" data-anchor-id="streams-stdinstdoutstderr">3.1 Streams (stdin/stdout/stderr)</h3>
<p>Unix programs that involve input and/or output often operate by reading input from a <em>stream</em> known as standard input (<em>stdin</em>), and writing their results to a stream known as standard output (<em>stdout</em>). In addition, a third stream known as standard error (<em>stderr</em>) receives error messages and other information that’s not part of the program’s results. In the usual interactive session, standard output and standard error default to your screen, and standard input defaults to your keyboard.</p>
</section>
<section id="overview-of-redirection" class="level3">
<h3 class="anchored" data-anchor-id="overview-of-redirection">3.2 Overview of redirection</h3>
<p>You can change the place from which programs read and write through redirection. The shell provides this service, not the individual programs, so redirection will work for all programs. The following table shows some examples of redirection.</p>
<p><strong>Table. Common Redirection Operators</strong></p>
<table class="table">
<thead>
<tr class="header">
<th>
Redirection Syntax
</th>
<th>
Function
</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>
<code>$ cmd &gt; file</code>
</td>
<td>
Send <em>stdout</em> to <em>file</em>
</td>
</tr>
<tr class="even">
<td>
<code>$ cmd 1&gt; file</code>
</td>
<td>
Same as above
</td>
</tr>
<tr class="odd">
<td>
<code>$ cmd 2&gt; file</code>
</td>
<td>
Send <em>stderr</em> to <em>file</em>
</td>
</tr>
<tr class="even">
<td>
<code>$ cmd &gt; file 2&gt;&amp;1</code>
</td>
<td>
Send both <em>stdout</em> and <em>stderr</em> to <em>file</em>
</td>
</tr>
<tr class="odd">
<td>
<code>$ cmd &lt; file</code>
</td>
<td>
Receive <em>stdin</em> from <em>file</em>
</td>
</tr>
<tr class="even">
<td>
<code>$ cmd &gt;&gt; file</code>
</td>
<td>
Append <em>stdout</em> to <em>file</em>
</td>
</tr>
<tr class="odd">
<td>
<code>$ cmd 1&gt;&gt; file</code>
</td>
<td>
Same as above
</td>
</tr>
<tr class="even">
<td>
<code>$ cmd 2&gt;&gt; file</code>
</td>
<td>
Append <em>stderr</em> to <em>file</em>
</td>
</tr>
<tr class="odd">
<td>
<code>$ cmd &gt;&gt; file 2&gt;&amp;1</code>
</td>
<td>
Append both <em>stdout</em> and <em>stderr</em> to <em>file</em>
</td>
</tr>
<tr class="even">
<td>
<code>$ cmd1 | cmd2</code>
</td>
<td>
Pipe <em>stdout</em> from <em>cmd1</em> to <em>cmd2</em>
</td>
</tr>
<tr class="odd">
<td>
<code>$ cmd1 2&gt;&amp;1 | cmd2</code>
</td>
<td>
Pipe <em>stdout</em> and <em>stderr</em> from <em>cmd1</em> to <em>cmd2</em>
</td>
</tr>
<tr class="even">
<td>
<code>$ cmd1 | tee file1 | cmd2</code>
</td>
<td>
Pipe <em>stdout</em> from <em>cmd1</em> to <em>cmd2</em> while simultaneously writing it to <em>file1</em>
</td>
</tr>
<tr class="even">
<td>
</td>
<td>
using <em>tee</em>
</td>
</tr>
</tbody>
</table>
<p>Note that <code>cmd</code> may include options and arguments as seen in the previous section.</p>
</section>
<section id="standard-redirection-pipes" class="level3">
<h3 class="anchored" data-anchor-id="standard-redirection-pipes">3.3 Standard redirection (pipes)</h3>
<p>Operations where output from one command is used as input to another command (via the <code>|</code> operator) are known as pipes; they are made especially useful by the convention that many UNIX commands will accept their input through the standard input stream when no file name is provided to them.</p>
<p>A simple pipe to <code>wc</code> to count the number of words in a string:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"hey there"</span> <span class="kw">|</span> <span class="fu">wc</span> <span class="at">-w</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Translating lowercase to UPPERCASE with <code>tr</code>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">'user1'</span>  <span class="kw">|</span> <span class="fu">tr</span> <span class="st">'a-z'</span> <span class="st">'A-Z'</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="ex">USER1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here’s an example of finding out how many unique entries there are in the 2nd column of a data file whose fields are separated by commas:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span><span class="st">','</span> <span class="at">-f2</span> cpds.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="kw">|</span> <span class="fu">wc</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span><span class="st">','</span> <span class="at">-f2</span> cpds.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="op">&gt;</span> countries.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Here are the piecies of what is going on in the commands above:</p>
<ul>
<li>We use the <code>cut</code> utility to extract the second field (<code>-f2</code>) or column of the file <code>cpds.csv</code> where the fields (or columns) are split or delimited by a comma (<code>-d','</code>).</li>
<li>The standard output of the <code>cut</code> command [is then piped (via <code>|</code>) to the standard input of the <code>sort</code> command.</li>
<li>Then the output of <code>sort</code> is sent to the input of <code>uniq</code> to remove duplicate entries in the sorted list provided by <code>sort</code>. (Rather than using <code>sort | uniq</code>, you could also use <code>sort -u</code>.)</li>
<li>Finally, the first of the <code>cut</code> commands prints a word count summary using <code>wc</code>; while the second saving the sorted information with duplicates removed in the file <code>countries.txt</code>.</li>
</ul>
<p>As another example of checking for anomalies in a set of files, with the , to see if there are any “S” values in certain fields (based on fixed width using <code>-b</code>) of a set of files (<code>USC*dly</code>), one can do this:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-b29,37,45,53,61,69,77,85,93,101,109,117,125,133,141,149,</span> <span class="dt">\&nbsp;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>            <span class="ex">157,165,173,181,189,197,205,213,221,229,237,245,253,</span> <span class="dt">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>            261,269 USC<span class="pp">*</span>.dly <span class="kw">|</span> <span class="fu">grep</span> S <span class="kw">|</span> <span class="fu">less</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(Note I did that on 22,000 files (5 Gb or so) in about 5 minutes on my desktop; it would have taken much more time to read the data into a program like R or Python.)</p>
</section>
<section id="the-tee-command" class="level3">
<h3 class="anchored" data-anchor-id="the-tee-command">3.4 The <code>tee</code> command</h3>
<p>The <code>tee</code> command lets you create two streams from one. For example, consider the case where you want the results of this command:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span><span class="st">','</span> <span class="at">-f2</span> cpds.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to both be output to the terminal screen you are working in as well as being saved to a file. You could issue the command twice:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span><span class="st">','</span> <span class="at">-f2</span> cpds.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span><span class="st">','</span> <span class="at">-f2</span> cpds.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="op">&gt;</span> countries.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Instead of repeating the command and wasting computing time, you could use <code>tee</code> command:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span><span class="st">','</span> <span class="at">-f2</span> cpds.csv <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="kw">|</span> <span class="fu">tee</span> countries.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="command-substitution-and-the-xargs-command" class="level2">
<h2 class="anchored" data-anchor-id="command-substitution-and-the-xargs-command">4 Command substitution and the <code>xargs</code> command</h2>
<section id="command-substitution" class="level3">
<h3 class="anchored" data-anchor-id="command-substitution">4.1 Command substitution</h3>
<p>A closely related, but subtly different, capability to piping is command substitution. You may sometimes need to substitute the results of a command for use by another command. For example, if you wanted to use the directory listing returned by <code>ls</code> as the argument to another command, you would type <code>$(ls)</code> in the location you want the result of <code>ls</code> to appear.</p>
<p>When the shell encounters a command surrounded by <code>$()</code>, it runs the command and replaces the expression with the output from the command. This allows something similar to a pipe, but it is appropriate when a command reads its arguments directly from the command line instead of through standard input.</p>
<p>For example, suppose we are interested in searching for the text <code>pdf</code> in the last 4 R code files (those with suffix <code>.r</code> or <code>.R</code>) that were modified in the current directory. We can find the names of the four most recently modified files ending in <code>.R</code> or <code>.r</code> using:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-t</span> <span class="pp">*</span>.<span class="dt">{R</span><span class="op">,</span><span class="dt">r}</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and we can search for the required pattern using <code>grep</code> . Putting these together with command substitution, we can solve the problem using:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep pdf <span class="va">$(</span><span class="fu">ls</span> <span class="at">-t</span> <span class="pp">*</span>.<span class="dt">{R</span><span class="op">,</span><span class="dt">r}</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-4</span><span class="va">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Suppose that the four R code file names produced by the <code>ls</code> command above were: <code>test.R</code>, <code>run.R</code>, <code>analysis.R</code> , and <code>process.R</code>. Then the result of the command substitution above is to run the following command:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep pdf test.R run.R analysis.R process.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-tip callout-titled" title="Command substitution alternate syntax">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Command substitution alternate syntax
</div>
</div>
<div class="callout-body-container callout-body">
<p>An older notation for command substitution is to use backticks (e.g., <code>`ls`</code> rather than <code>$(ls)</code>). It is generally preferable to use the new notation, since there are many annoyances with the backtick notation. For example, backslashes (<code>\</code>) inside of backticks behave in a non-intuitive way, nested quoting is more cumbersome inside backticks, nested substitution is more difficult inside of backticks, and it is easy to visually mistake backticks for a single quote.</p>
</div>
</div>
<p>Note that piping the output of the <code>ls</code> command into <code>grep</code> would not achieve the desired goal, since <code>grep</code> reads its filenames as arguments from the command line, not standard input.</p>
</section>
<section id="the-xargs-command" class="level3">
<h3 class="anchored" data-anchor-id="the-xargs-command">4.2 The <code>xargs</code> command</h3>
<p>While it doesn’t work to directly use pipes to redirect output from one program as arguments to another program, you can redirect output as the arguments to another program using the <code>xargs</code> utility. Here’s an example:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-t</span> <span class="pp">*</span>.<span class="dt">{R</span><span class="op">,</span><span class="dt">r}</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-4</span> <span class="kw">|</span> <span class="fu">xargs</span> grep pdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where the result is equivalent to the use of command substitution we saw in the previous section.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Try the following commands:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span> tr</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> type <span class="at">-p</span> tr</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span> type <span class="at">-p</span> tr</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span> <span class="va">$(</span><span class="bu">type</span> <span class="at">-p</span> tr<span class="va">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Make sure you understand why each command behaves as it does.</p>
</div>
</div>
</section>
</section>
<section id="brace-expansion" class="level2">
<h2 class="anchored" data-anchor-id="brace-expansion">5 Brace expansion</h2>
<p>We saw brace expansion when discussing file wildcards. For example, we can rename a file with a long name easily like this:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv my_long_filename.<span class="dt">{txt</span><span class="op">,</span><span class="dt">csv}</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls my_long_filename<span class="pp">*</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="ex">my_long_filename.csv</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv my_long_filename.csv<span class="dt">{</span><span class="op">,</span><span class="dt">-old}</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls my_long_filename<span class="pp">*</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="ex">my_long_filename.csv-old</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This works because the shell expands the braces before passing the result on to the command. So with the <code>mv</code> calls above, the shell expands the braces to produce</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> my_long_filename.txt my_long_filename.csv</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> my_long_filename.csv my_long_filename.csv-old</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Brace expansion is quite useful and more flexible than I’ve indicated. Above we saw how to use brace expansion using a comma-separated list of items inside the curly braces (e.g., <code>{txt,csv}</code>), but they can also be used with a sequence specification. A sequence is indicated with a start and end item separated by two periods (<code>..</code>). Try typing the following examples at the command line and try to figure out how they work:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">15</span><span class="dt">}</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo c<span class="dt">{</span>c<span class="dt">..</span>e<span class="dt">}</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="dt">{</span>d<span class="dt">..</span>a<span class="dt">}</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">5</span><span class="dt">..</span><span class="dv">2</span><span class="dt">}</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="dt">{</span>z<span class="dt">..</span>a<span class="dt">..</span><span class="dv">-2</span><span class="dt">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This can be used for filename wildcards but also anywhere else it would be useful. For example to kill a bunch of sequentially-numbered processes:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> kill 1397<span class="dt">{</span><span class="dv">62</span><span class="dt">..</span><span class="dv">81</span><span class="dt">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="quoting" class="level2">
<h2 class="anchored" data-anchor-id="quoting">6 Quoting</h2>
<p>A note about using single vs.&nbsp;double quotes in shell code. In general, variables inside double quotes will be evaluated, but variables not inside double quotes will not be:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">"My home directory is </span><span class="va">$HOME</span><span class="st">"</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="ex">My</span> home directory is /home/jarrod</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo <span class="st">'My home directory is $HOME'</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="ex">My</span> home directory is <span class="va">$HOME</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Table. Quotes</strong></p>
<table class="table">
<thead>
<tr class="header">
<th>
Types of Quoting
</th>
<th>
Description
</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>
<code>' '</code>
</td>
<td>
hard quote - no substitution allowed
</td>
</tr>
<tr class="even">
<td>
<code>" "</code>
</td>
<td>
soft quote - allow substitution
</td>
</tr>
</tbody>
</table>
<p>This can be useful, for example, when you have a directory with a space in its name (of course, it is better to avoid spaces in file and directory names). For example, suppose you have a directory named “with space” within the <code>/home/jarrod</code> home directory. Since bash uses spaces to parse the elements of the command line, you might try escaping any spaces with a backslash:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="va">$HOME</span>/with\ space</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="ex">file1.txt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>However that can be a pain and may not work in all circumstances. A cleaner approach is to use soft (or double) quotes:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="st">"</span><span class="va">$HOME</span><span class="st">/with space"</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="ex">file1.txt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you used hard quotes, you will get this error:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="st">'$HOME/with space'</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ls:</span> cannot access <span class="va">$HOME</span>/with space: No such file or directory</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>What if you have double quotes in your file or directory name, such as a directory <code>"with"quote</code> (again, it is better to avoid using double quotes in file and directory names)? In this case, you will need to escape the quote:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="st">"</span><span class="va">$HOME</span><span class="st">/</span><span class="dt">\"</span><span class="st">with</span><span class="dt">\"</span><span class="st">quote"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>So we’ll generally use double quotes. We can always work with a literal double quote by escaping it as seen above.</p>
<div class="callout callout-style-default callout-warning callout-titled" title="Curly quotes">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Curly quotes
</div>
</div>
<div class="callout-body-container callout-body">
<p>Avoid using curly quotes (e.g., “ or ’) when coding (in the shell or otherwise), except as part of an actual string.</p>
</div>
</div>
</section>
<section id="powerful-tools-for-text-manipulation-grep-sed-and-awk" class="level2">
<h2 class="anchored" data-anchor-id="powerful-tools-for-text-manipulation-grep-sed-and-awk">7 Powerful tools for text manipulation: <code>grep</code>, <code>sed</code>, and <code>awk</code></h2>
<p>Before the text editor, there was the line editor. Rather than presenting you with the entire text as a text editor does, a line editor only displays lines of text when it is requested to. The original Unix line editor is called <code>ed</code>. You will likely never use <code>ed</code> directly, but you will very likely use commands that are its descendants. For example, the commands <code>grep</code>, <code>sed</code>, <code>awk</code>, and <code>vim</code> are all based directly on <code>ed</code> (e.g., <code>grep</code> is a <code>ed</code> command that is now available as a standalone command, while <code>sed</code> is a streaming version of <code>ed</code>) or inherit much of its syntax (e.g., <code>awk</code> and <code>vim</code> both heavily borrow from the <code>ed</code> syntax). Since <code>ed</code> was written when computing resources were very constrained compared to today, this means that the syntax of these commands can be terse. However, it also means that learning the syntax for one of these tools will be rewarded when you need to learn the syntax of another of these tools.</p>
<p>An important benefit of these tools, particularly when working with large files, is that by operating line by line they don’t incur the memory use that would be involved in reading an entire file into memory in a program like Python or R and then operating on the file’s contents in memory.</p>
<p>You may not need to learn much <code>sed</code> or <code>awk</code>, but it is good to know about them since you can search the internet for awk or sed one-liners. If you have some file munging task, it can be helpful to do a quick search before writing code to perform the task yourself.</p>
<section id="grep" class="level3">
<h3 class="anchored" data-anchor-id="grep">7.1 <code>grep</code></h3>
<p>The simplest of these tools is <code>grep</code>. As I mentioned, <code>ed</code> only displays lines of text when requested. One common task was to print all the lines in a file matching a specific regular expression. The command in <code>ed</code> that does this is <code>g/&lt;re&gt;/p</code>, which stands for globally match all lines containing the regular express <code>&lt;re&gt;</code> and print them out.</p>
<p>One often uses <code>grep</code> with <a href="regex">regular expressions</a>, covered later, so we’ll just show some basic usage here.</p>
<p>To start you will need to create a file called <code>testfile.txt</code> with the following content:</p>
<pre><code>This is the first line.
Followed by this line.
And then ...</code></pre>
<p>To print all the lines containing <code>is</code>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep is testfile.txt</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="ex">This</span> is the first line.</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Followed</span> by this line.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To print all the lines <strong>not</strong> containing <code>is</code>:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-v</span> is testfile.txt </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="ex">And</span> then ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To print only the matches, one can use the <code>-o</code> flag, though this would generally only be interesting when used with a regular expression pattern since in this case, we know “is” is what will be returned:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-o</span> is testfile.txt</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="ex">is</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="ex">is</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="ex">is</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>One could also use <code>--color</code> so that the matches are highlighed in color.</p>
</section>
<section id="sed" class="level3">
<h3 class="anchored" data-anchor-id="sed">7.2 <code>sed</code></h3>
<p>Here are some useful things you can do with <code>sed</code>. Note that as with other UNIX tools, <code>sed</code> will not generally directly alter a file (unless you use the <code>-i</code> flag); instead it will print the modified version of the file to stdout.</p>
<p>Printing lines of text with <code>sed</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sed <span class="at">-n</span> <span class="st">'1,9p'</span> file.txt       <span class="co"># prints out lines 1-9 from file.txt</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sed <span class="at">-n</span> <span class="st">'/^#/p'</span> file.txt      <span class="co"># prints out lines starting with # from file.txt </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The first command prints out lines 1-9, while the second one prints out lines starting with <code>#</code>.</p>
<p>Deleting lines of text with <code>sed</code>:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sed <span class="at">-e</span> <span class="st">'1,9d'</span> file.txt</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sed <span class="at">-e</span> <span class="st">'/^;/d'</span> <span class="at">-e</span> <span class="st">'/^$/d'</span> file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The first line deletes lines 1-9 of <code>file.txt</code>, printing the remaining lines to stdout. What do you think the second line does?</p>
<p>Note that the -e flag is only necessary if you want to have more than one expression, so it’s not actually needed in the first line.</p>
<p>Text substitution with <code>sed</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sed <span class="st">'s/old_pattern/new_pattern/'</span> file.txt <span class="op">&gt;</span> new_file.txt</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sed <span class="st">'s/old_pattern/new_pattern/g'</span> file.txt <span class="op">&gt;</span> new_file.txt</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sed <span class="at">-i</span> <span class="st">'s/old_pattern/new_pattern/g'</span> file.txt </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The first line replaces only the first instance in a line, while the second line replaces all instances in a line (i.e., globally). The use of the -i flag in the third line replaces the pattern <strong>in place</strong> in the file, thereby altering file.txt. Use the <code>-i</code> flag carefully as there is no way to easily restore the original version of the file.</p>
</section>
<section id="awk" class="level3">
<h3 class="anchored" data-anchor-id="awk">7.3 <code>awk</code></h3>
<p>Awk is a general purpose programming language typically used in data extraction tasks and particularly well-suited to one-liners (although it is possible to write long programs in it, it is rare). For our purposes, we will just look at a few common one-liners to get a sense of how it works. Basically, awk will go through a file line by line and perform some action for each line.</p>
<p>For example, to select a given column from some text (here getting the PIDs of some processes, which are in the second (<code>$2</code>) column of the output of <code>ps -f</code>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ps</span> <span class="at">-f</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">'{ print $2 }'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To double space a file, you would read each line, print it, and then print a blank line:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> awk <span class="st">'{ print } { print "" }'</span> file.txt </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Print every line of a file that is longer than 80 characters:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> awk <span class="st">'length($0) &gt; 80'</span> file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Print the home directory of every user defined in the file <code>/etc/passwd</code>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> awk <span class="at">-F:</span> <span class="st">'{ print $6 }'</span> /etc/passwd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To see what that does, let’s look at the first line of <code>/etc/passwd</code>:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 /etc/passwd</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="ex">root:x:0:0:root:/root:/bin/bash</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As you can see the entries are separated by colons (<code>:</code>) and the sixth field contains the root user’s home directory (<code>/root</code>). The option <code>-F:</code> specifies that the colon <code>:</code> is the field delimiter (instead of the default space delmiter) and <code>print $6</code> prints the 6th field of each line.</p>
<p>Summing columns:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> awk <span class="st">'{print $1 + $2}'</span> file.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will sum columns 1 and 2 of <code>file.txt</code>.</p>
</section>
</section>
<section id="aliases-command-shortcuts-and-.bashrc" class="level2">
<h2 class="anchored" data-anchor-id="aliases-command-shortcuts-and-.bashrc">8 Aliases (command shortcuts) and .bashrc</h2>
<p>Aliases allow you to use an abbreviation for a command, to create new functionality or to insure that certain options are always used when you call an existing command. For example, I’m lazy and would rather type <code>q</code> instead of <code>exit</code> to terminate a shell window. You could create the alias as follow:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> alias q=exit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As another example, suppose you find the <code>-F</code> option of <code>ls</code> (which displays <code>/</code> after directories, <code>\</code> after executable files and <code>@</code> after links) to be very useful. The command :</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> alias ls=<span class="st">"ls -F"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will ensure that the <code>-F</code> option will be used whenever you use <code>ls</code>. If you need to use the unaliased version of something for which you’ve created an alias, precede the name with a backslash (<code>\</code>). For example, to use the normal version of <code>ls</code> after you’ve created the alias described above:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> <span class="dt">\l</span>s</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The real power of aliases is only achieved when they are automatically set up whenever you log in to the computer or open a new shell window. To achieve that goal with aliases (or any other bash shell commands), simply insert the commands in the file <code>.bashrc</code> in your home directory. For example, here is an excerpt from my <code>.bashrc</code>:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>    <span class="co"># .bashrc</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Source global definitions</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">[</span> <span class="ot">-f</span> /etc/bashrc <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>            <span class="bu">.</span> /etc/bashrc</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># User specific aliases and functions</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pushdp ()</span> <span class="kw">{</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>     <span class="bu">pushd</span> <span class="st">"</span><span class="va">$(</span><span class="ex">python</span> <span class="at">-c</span> <span class="st">"import os.path as _, </span><span class="va">${1}</span><span class="st">; </span><span class="dt">\</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="st">       print _.dirname(_.realpath(</span><span class="va">${1}</span><span class="st">.__file__[:-1]))"</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>     <span class="va">)</span><span class="st">"</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">EDITOR</span><span class="op">=</span>vim</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">source</span> /usr/share/git-core/contrib/completion/git-prompt.sh</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">PS1</span><span class="op">=</span><span class="st">'[\u@\h \W$(__git_ps1 " (%s)")]\$ '</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># history settings</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">HISTCONTROL</span><span class="op">=</span>ignoredups   <span class="co"># no duplicate entries</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">shopt</span> <span class="at">-s</span> histappend             <span class="co"># append, don't overwrite</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># R settings</span></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">R_LIBS</span><span class="op">=</span><span class="va">$HOME</span>/usr/lib64/R/library</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">alias</span> R=<span class="st">"/usr/bin/R --quiet --no-save"</span></span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Set path</span></span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>    <span class="va">mybin</span><span class="op">=</span><span class="va">$HOME</span>/usr/bin</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">PATH</span><span class="op">=</span><span class="va">$mybin</span>:<span class="va">$HOME</span>/.local/bin:<span class="va">$HOME</span>/usr/local/bin:<span class="va">$PATH</span>:</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">LD_LIBRARY_PATH</span><span class="op">=</span><span class="va">$LD_LIBRARY_PATH</span>:<span class="va">$HOME</span>/usr/local/lib</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Additional aliases  </span></span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">alias</span> grep=<span class="st">'grep --color=auto'</span></span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>    <span class="bu">alias</span> hgrep=<span class="st">'history | grep'</span></span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">alias</span> l.=<span class="st">'ls -d .* --color=auto'</span></span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>    <span class="bu">alias</span> ll=<span class="st">'ls -l --color=auto'</span></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>    <span class="bu">alias</span> ls=<span class="st">'ls --color=auto'</span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>    <span class="bu">alias</span> more=less</span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>    <span class="bu">alias</span> vi=vim</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-tip callout-titled" title="Exercise">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Look over the content of the example <code>.bashrc</code> and make sure you understand what each line does. For instance, use <code>man grep</code> to see what the option <code>--color=auto</code> does. Use <code>man which</code> to figure out what the various options passed to it do.</p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/computing\.stat\.berkeley\.edu\/tutorial-using-bash");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>